## Hashiwokakero Solver

A Constraint Programming solver for the [Hashiwokakero](https://en.wikipedia.org/wiki/Hashiwokakero) logic puzzle, made with Google OR-Tools. Based on [Coelho et al.](https://arxiv.org/abs/1905.00973)'s paper and extended to allow for errors in the grid's digits.  

### Requirements
- Python (tested with 3.10.9)
- OR-Tools `pip install ortools`
- Additional files use the `flask`, `numpy`, and `requests` packages 

### Basic Solver

- Run `python basic_solver.py <has_grid>` to use the basic solver. Grids have to be in `.has` format
- Use the `--a` flag to find the number of valid solutions for that grid.
- Use the `--write` flag to write solutions to a file (it will create a solutions/ folder)
- Example puzzles in `.has` format are in `puzzles/basic/`. They were generated by [Coelho et al. 2019](https://arxiv.org/abs/1905.00973). Note that they allow multiple solutions.

### Probabilistic version

- Run the _probabilistic solver_ with `python probabilistic_solver.py <json_grid>`. `puzzles/probabilistic/toy_grid_probs.json` is an example of the format required
- It is meant to correct errors from an image recognition system that reads Hashi grids from images. It requires a list of probabilities for each island :

  | Island | x_position | y_position | 1   | 2   | 3   | 4   | 5   | 6   | 7   | 8   |
  | ------ | ---------- | ---------- | --- | --- | --- | --- | --- | --- | --- | --- |
  | 1      | 0          | 2          | 2%  | 1%  | 87% | 0%  | 0%  | 0%  | 0%  | 10% |
  | ...    |            |            |     |     |     |     |     |     |     |     |

  It finds the grid that has a solution with the highest probabilities.  
  If the grid should only have a unique solution, use `--solution_is_unique`. If the solver finds multiple solutions, it will deduce that the digits were wrong and will find the next most likely grid with a unique solution.
- Run `python create_probs_grids_from_has_files.py` to create probabilistic grids from the .has files in puzzles/basic/